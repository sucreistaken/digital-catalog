/* Catalog.css */
.catalog {
    padding-bottom: 80px;
    background: #fbfbfd;
    min-height: 100vh;
}

.catalog-hero {
    padding: 100px 0 60px;
    text-align: center;
    background: white;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.catalog-hero h1 {
    font-size: 3rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    margin-bottom: 16px;
    background: linear-gradient(135deg, #1d1d1f 0%, #434344 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.catalog-hero p {
    font-size: 1.25rem;
    color: #86868b;
    max-width: 600px;
    margin: 0 auto;
}

/* Toolbar */
.catalog-toolbar {
    padding: 20px 24px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 24px;
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: saturate(180%) blur(20px);
    position: sticky;
    top: 70px;
    z-index: 90;
    margin-top: -30px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.toolbar-left {
    flex: 1;
    min-width: 0;
    /* Crucial for flex child scroll */
    position: relative;
}

.pills-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.catalog-toolbar .category-pills {
    display: flex;
    gap: 12px;
    overflow-x: auto;
    padding: 4px 4px 8px 4px;
    /* Space for shadow */
    scrollbar-width: none;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    /* Default: No mask */
    mask-image: linear-gradient(to right, black 100%, black 100%);
    -webkit-mask-image: linear-gradient(to right, black 100%, black 100%);
}

/* Dynamic Masking based on wrapper state */
.pills-wrapper.mask-left .category-pills {
    mask-image: linear-gradient(to right, transparent 0, black 60px);
    -webkit-mask-image: linear-gradient(to right, transparent 0, black 60px);
}

.pills-wrapper.mask-right .category-pills {
    mask-image: linear-gradient(to left, transparent 0, black 60px);
    -webkit-mask-image: linear-gradient(to left, transparent 0, black 60px);
}

.pills-wrapper.mask-left.mask-right .category-pills {
    mask-image: linear-gradient(to right, transparent 0, black 60px, black calc(100% - 60px), transparent 100%);
    -webkit-mask-image: linear-gradient(to right, transparent 0, black 60px, black calc(100% - 60px), transparent 100%);
}

.category-pills::-webkit-scrollbar {
    display: none;
}

.category-pill {
    padding: 8px 18px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 500;
    background: #f5f5f7;
    color: #1d1d1f;
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
    white-space: nowrap;
    user-select: none;
}

.category-pill:hover {
    background: #e8e8ed;
    transform: translateY(-1px);
}

.category-pill.active {
    background: #1d1d1f;
    color: white;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.scroll-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(4px);
    border: 1px solid rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 3;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transition: all 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
    color: #1d1d1f;
    opacity: 0;
    /* Hidden by default */
    pointer-events: none;
}

/* Show buttons on hover or when they are active logic dictates (handled by React state, but CSS opacity transition) */
.pills-wrapper:hover .scroll-btn {
    opacity: 1;
    pointer-events: auto;
}

/* Also ensure buttons are visible if we want them always visible on desktop, or just rely on hover. 
   User asked for "Professional UX", usually hover is cleaner. 
   But let's stick to opacity 1 for now or better yet, make them scale in. */

.scroll-btn {
    /* Resetting opacity to 1 for now as per previous strong usability */
    opacity: 1;
    pointer-events: auto;
}

.scroll-btn:hover {
    background: white;
    transform: translateY(-50%) scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
}

.scroll-btn:active {
    transform: translateY(-50%) scale(0.95);
}

.scroll-btn.left {
    left: 0;
}

.scroll-btn.right {
    right: 0;
}

.search-box {
    position: relative;
    min-width: 260px;
    flex-shrink: 0;
    /* Prevent shrinking */
}

.search-box input {
    width: 100%;
    padding: 10px 16px 10px 40px;
    border-radius: 20px;
    /* More rounded */
    border: 1px solid transparent;
    background: #f5f5f7;
    font-size: 0.95rem;
    transition: all 0.2s ease;
}

.search-box input:focus {
    outline: none;
    background: white;
    border-color: #0071e3;
    box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
}

.search-box svg {
    position: absolute;
    left: 14px;
    top: 50%;
    transform: translateY(-50%);
    color: #86868b;
}

/* Products Grid */
.products-section {
    padding: 40px 24px;
}

.results-count {
    padding: 0 24px;
    margin-top: 20px;
    color: #86868b;
    font-size: 0.9rem;
    font-weight: 500;
}

.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 32px;
}

/* Product Card */
.product-card {
    background: white;
    border-radius: 20px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
    position: relative;
    display: flex;
    flex-direction: column;
}

.product-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
}

.product-image {
    aspect-ratio: 1;
    background: #f5f5f7;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    position: relative;
    overflow: hidden;
}

.product-image img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    transition: transform 0.5s ease;
    mix-blend-mode: multiply;
}

.product-card:hover .product-image img {
    transform: scale(1.08);
}

.featured-badge {
    position: absolute;
    top: 16px;
    left: 16px;
    background: black;
    color: white;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 4px 10px;
    border-radius: 12px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    z-index: 2;
}

.out-stock-overlay {
    position: absolute;
    inset: 0;
    background: rgba(255, 255, 255, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    color: #ff3b30;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    z-index: 3;
}

.product-info {
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex: 1;
}

.product-sku {
    font-size: 0.75rem;
    color: #86868b;
    font-weight: 600;
    letter-spacing: 0.02em;
}

.product-info h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #1d1d1f;
    line-height: 1.3;
}

.product-specs-mini {
    display: flex;
    gap: 8px;
    font-size: 0.85rem;
    color: #86868b;
    margin-top: auto;
}

.product-colors-mini {
    display: flex;
    gap: 6px;
    margin-top: 12px;
}

.mini-swatch {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 1px solid rgba(0, 0, 0, 0.1);
}

.more-colors {
    font-size: 0.75rem;
    color: #86868b;
    display: flex;
    align-items: center;
}

/* Standard Product Modal */
.product-modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: fadeIn 0.2s ease;
}

.product-modal {
    background: white;
    width: 100%;
    max-width: 900px;
    height: auto;
    max-height: 90vh;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    position: relative;
    overflow: hidden;
    display: flex;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

.modal-content {
    display: flex;
    width: 100%;
    overflow: hidden;
}

.modal-image {
    flex: 1;
    background: #fbfbfd;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px;
    position: relative;
}

.modal-image img {
    max-width: 100%;
    max-height: 400px;
    object-fit: contain;
    mix-blend-mode: multiply;
}

.modal-details {
    flex: 1;
    background: white;
    display: flex;
    flex-direction: column;
    padding: 40px;
    overflow-y: auto;
}

.modal-header {
    margin-bottom: 20px;
}

.modal-sku {
    font-size: 0.85rem;
    color: #86868b;
    font-weight: 500;
    margin-bottom: 4px;
    display: block;
}

.modal-header h2 {
    font-size: 1.8rem;
    font-weight: 700;
    color: #1d1d1f;
    margin-bottom: 8px;
    line-height: 1.2;
}

.modal-category {
    display: inline-block;
    padding: 4px 10px;
    background: #f5f5f7;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 600;
    color: #424245;
}

.modal-description {
    font-size: 1rem;
    line-height: 1.6;
    color: #424245;
    margin-bottom: 30px;
}

.modal-specs {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 30px;
    padding-bottom: 30px;
    border-bottom: 1px solid #e5e5e5;
}

.spec-item label {
    display: block;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #86868b;
    margin-bottom: 4px;
}

.spec-item span {
    font-size: 0.95rem;
    font-weight: 600;
    color: #1d1d1f;
}

.modal-colors {
    margin-bottom: 30px;
}

.modal-colors label {
    display: block;
    font-size: 0.8rem;
    font-weight: 600;
    margin-bottom: 10px;
}

.color-chips {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.color-chip {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 1px solid rgba(0, 0, 0, 0.1);
    cursor: pointer;
    transition: transform 0.2s;
}

.color-chip:hover {
    transform: scale(1.1);
}

.color-chip.active {
    box-shadow: 0 0 0 2px white, 0 0 0 4px #0071e3;
}

.modal-actions {
    display: flex;
    gap: 12px;
    margin-top: auto;
}

.btn-primary,
.btn-secondary {
    flex: 1;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    border-radius: 8px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: background 0.2s;
}

.btn-primary {
    background: #0071e3;
    color: white;
    border: none;
}

.btn-primary:hover {
    background: #0077ed;
}

.btn-secondary {
    background: #f5f5f7;
    color: #1d1d1f;
}

.btn-secondary:hover {
    background: #e8e8ed;
}

.modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.9);
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    color: #1d1d1f;
}

.modal-close:hover {
    background: #f5f5f7;
}

.out-stock-badge {
    position: absolute;
    top: 20px;
    left: 20px;
    background: #ff3b30;
    color: white;
    padding: 4px 12px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
}

/* Responsive */
@media (max-width: 768px) {
    .product-modal {
        flex-direction: column;
        height: auto;
        max-height: 90vh;
        overflow-y: auto;
    }

    .modal-content {
        flex-direction: column;
    }

    .modal-image {
        min-height: 250px;
        padding: 20px;
    }

    .modal-image img {
        max-height: 200px;
    }

    .modal-details {
        padding: 24px;
    }

    .modal-actions {
        flex-direction: column;
    }
}

/* Color Filters in Toolbar */
.color-filters {
    display: flex;
    gap: 8px;
    align-items: center;
    overflow-x: auto;
    padding-bottom: 2px;
    scrollbar-width: none;
    margin-left: 12px;
    margin-right: auto;
}

.color-filters::-webkit-scrollbar {
    display: none;
}

.color-filter-pill {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 1px solid rgba(0, 0, 0, 0.1);
    background: white;
    padding: 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.color-filter-pill:hover {
    transform: scale(1.1);
    border-color: rgba(0, 0, 0, 0.2);
}

.color-filter-pill.active {
    box-shadow: 0 0 0 2px white, 0 0 0 4px #0071e3;
    transform: scale(1.1);
}

.color-dot {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.color-dot.all {
    background: conic-gradient(red, yellow, lime, aqua, blue, magenta, red);
    opacity: 0.8;
}

.color-filter-pill span {
    display: none;
}

/* Specific case for 'All' button if we want it to be text instead of rainbow dot */
/* But rainbow dot is cooler for color filter. Or we can use a text pill for 'All' */
.color-filter-pill:first-child .color-dot.all {
    width: 20px;
    height: 20px;
}